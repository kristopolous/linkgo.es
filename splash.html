<!doctype html5>
<link href='http://fonts.googleapis.com/css?family=Donegal+One' rel='stylesheet' type='text/css'>
<title>ThisWillTake.Me</title>
<style>
body { 
  background: #f0f5f4;
  margin: 0;
  text-align: center;
  font-family: 'Donegal One', serif;
}
a {
  cursor: pointer;
  text-decoration: underline;
  color: #102314;
}
form {
  margin: 0;
  padding: 0;
}
h1 { 
  margin-top: 1.5em;
  color: #102314;
  margin-bottom: 0;
  font-size: 3.5em;
  letter-spacing: 0.1em;
}
code {
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  color: #d0f4d8;
  display:inline-block;
  padding:0.25em 0;
  background: rgba(20, 40, 30, 0.9);
}
#title {
  display: inline-block;
  margin-bottom: 2em;
}
h2 {
  color: rgba(16, 35, 20, 0.80);
  font-weight: 400;
  letter-spacing: 0.1em;
  margin-top: -0.5em;
  float: right;
}
p {
  font-size:1.25em;
  margin-bottom: 0;
  margin-top: 0;
}

button,#url {
  display: block;
  font-family: 'Donegal One', serif;
  font-size:1.5em;
}
button { 
  text-decoration: underline;
  font-weight:bold;
  font-size:1.5em;
  width: 100%;
  color: #d0f4d8;
  background: transparent;
  border:0;
}
#transform:active {
  padding:0.5em 0 0.3em;
}
button:active{
  color:#fff;
  text-indent: 0.2em;
}
#transform:hover {
  cursor: pointer;
  background: rgba(10,180,40,0.8);
}
#url {
  width: 30em;
  padding: 0.35em;
  margin:1.25em 1.5em;
  font-size: 1.25em;
  border:2px solid rgba(10,100,40,0.8);
  border-radius: 4px;
}

.active > #loader { display: inline-block; padding:0.58em 0 ;width:80px;}
#loader           { display: none; }

.active > #doTransform { display: none; }

#transform{
  text-align: center;
  width: 100%;
  display: block;
  margin-top: 1em; 
  padding:0.4em 0;
  background: rgba(20,120,30,0.8);
  border-radius: 0 0 7px 7px;
}
#linkContainer {
  display: none;
  padding: 0;
  top: 0;
  margin: 0;
  left: 0;
  color: #d0f4d8;
  width: 100%;
  font-size: 1.25em;
}
#link {
  font-size: 0.9em;
  padding: 0.75em 0 0.5em;
  background: rgba(16, 35, 20, 0.8);
  margin:0;
}
#clipboard-wrapper:hover {
  background: rgba(78, 140, 80, 0.5);
  color: #243;
}
#clipboard-wrapper:active {
  background: rgba(32, 65, 40, 0.6);
  color:#fff;
}
#clipboard-wrapper {
  font-weight: bold;
  padding: 0.25em 0;
  text-decoration: underline;
  background: rgba(78, 130, 80, 0.7);
  color:#fff;
  cursor: pointer;
}
#main {
  margin-top: 1em;
  border-radius: 6px;
  padding-top: 1.75em;
  background: rgba(160, 190, 150, 0.85);
  display: inline-block;
}
#donate {
  color:#343;
  font-size:0.85em;
  margin-top:2em;
  line-height:40px;
}
</style>
<div id="linkContainer">
  <p id="link">http://www.youtube.com/watch?v=vWiCqUD-uJo</p>
  <div id=clipboard-wrapper>
    <a onclick=clipboard() id=clipboard-button class=btn>Copy to Clipboard</a>
  </div>
</div>
<div id="title">
  <h1>ThisWillTake.Me</h1>
  <h2>Demystifies URLs.</h2>
</div>

<div id="main">
  <p>Drop a link below (try youtube or a news site).</p>
  <form method=GET action="javascript:doTransform()">
    <input id="url" type="text" placeholder="http://example.com/" autocomplete="off" value="">
    <span id='transform'>
      <img id="loader" src="img/ajax-loader.gif">
      <button id="doTransform">Convert It!</button>
    </span>
  </form>
</div>
<br>
 
  <form action="https://www.paypal.com/cgi-bin/webscr" method="post" id="donate">
    <a onclick="this.parentNode.submit()">Donate</a> to this free and unlimited service. 
    <input type="hidden" name="cmd" value="_s-xclick">
    <input type="hidden" name="hosted_button_id" value="X4J4BD86VTXWS">
  </form>
<code>
  <b>API:</b> Do an HTTP GET to <u>convert.thiswilltake.me/(url to convert)</u>
</code>

<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script>
var clip;
$(function(){
  $("#url").focus();
});
function doTransform(){
  var url = $("#url").val();
  if(url.length) {
    $("#linkContainer").css({
      display: 'none'
    });
    $("#transform").addClass("active");
    $.post("/", {url: url}, function(ret) {
      $("#transform").removeClass("active");
      if(ret.status) {
        $("#url").val("");
        $("#link").html(ret.url);
        $("#linkContainer").slideDown(1000, function(){
          initClipboard();
        });
        $("#url").focus();
      }
    }, 'json');
  }
}

function initClipboard() {
  clip = new ZeroClipboard.Client();
  ZeroClipboard.setMoviePath("ZeroClipboard.swf")
  clip.setHandCursor( true );
  clip.addEventListener('mouseOver', function (client) {
    clip.setText($("#link").html());  
  });

  clip.glue( 'clipboard-button', 'clipboard-wrapper' );
  $("#ZeroClipboardMovie_1").css('opacity',0.001);
}
function clipboard(){
  clip.setText($("#link").html());  
}
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-28399789-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = 'http://www.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
<script src=ZeroClipboard.min.js></script>
